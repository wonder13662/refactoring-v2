# 5.1 리팩터링 설명 형식(Format of the Refactorings)
카탈로그의 리팩터링 기법들은 일정한 형식을 갖춰 정리했다. 각 기법에 대한 설명은 다음의 다섯 항목으로 구성된다.
- 가장 먼저 **이름**이 나온다. 이름은 리팩터링 용어를 구축하는 데 중요하다. 책 전반에서 해당 리팩터링을 이 이름으로 지칭한다. 같은 기법을 다르게 부르는 경우도 있기 때문에 그중 흔한 이름도 함께 소개한다.
- 다음으로 리팩터링의 핵심 개념을 간략히 표현한 **개요**(개념도 + 코드 예시)가 나온다. 원하는 리팩터링을 찾을 때 도움될 것이다. 
- 그 다음에 나오는 **배경**은 해당 리팩터링 기법이 왜 필요한지와 그 기법을 적용하면 안 되는 상황을 설명한다.
- 이어서 나오는 **절차**는 리팩터링하는 과정을 단계별로 제시한다.
- 마지막의 **예시**는 해당 리팩터링 기법을 실제로 적용하는 간단한 예와 그 효과를 보여준다.

**개요**에서는 리팩터링 전후로 코드가 어떻게 달라지는지 보여준다. 개요는 리팩터링의 개념이나 수행 과정을 설명하기 위해서가 아니라 나중에 다시 찾아볼 때 이 기법이 어떤 것인지 쉽게 떠올리기 위한 것이다. 개요만 보고는 잘 떠오르지 않는다면 예시까지 살펴봐야 할 것이다. 함께 나오는 간단한 그림도 마찬가지로 설명을 위해서가 아니라 기억 되살리기용 시각 장치다.

**절차**는 오랜만에 적용하는 리팩터링의 구체적인 단계를 잊지 않도록 개인 노트에 기록해둔 것이다. 그래서 압축된 표현이 많고, 단계를 왜 그렇게 구성했는지에 대한 설명이 없을 때도 많다. 제대로 된 설명은 '예시'에서 풀어준다. 그러니 해당 리팩터링을 알고 있지만 구체적인 진행 순서가 기억나지 않을 때 참고하기 좋은 짤막한 노트 정도로 생각하자(최소한 나는 이렇게 활용한다). 해당 리팩터링을 처음 볼 때는 **예시**를 꼼꼼히 읽기 바란다.

절차에는 해당 리팩터링의 단계를 가능한 한 잘게 나눠놓았다. 다시 강조하지만, 리팩터링을 안전하게 수행하려면 단계를 최대한 잘게 나누고 각 단계마다 테스트해야 한다. 실전에서는 각 단계를 더 크게 잡고 리팩터링할 때가 많은데, 그러다 버그가 생기면 이전 단계로 돌아가서 크기를 줄여 다시 진행한다. 어떤 단계에는 '→'로 시작하는 세부 항목이 딸려 있는데, 세부 단계가 아니라 특수한 경우를 위한 참고 사항이다. 이 항목들은 해당 단계에서 일종의 체크리스트처럼 활용할 수 있다. 나도 여기 적어둔 사항들이 기억나지 않을 때가 많다.

(항상 그런 것은 아니지만) 절차에서는 한 가지 방식만 소개하는데, 해당 리팩터링을 수행하는 유일한 방법이라는 뜻은 아니다. 그저 대부분 상황에 잘 들어맞는 절차를 선정했을 뿐이다. 리팩터링 경험이 쌓일수록 구체적인 절차를 변형하게 될 텐데, 그래도 문제없다. 작은 단계를 밟아 나가는 게 핵심이라는 점만 명심하기 바란다. 상황이 난해할수록 단계를 잘게 나누자.

**예시**는 어처구니없을 정도로 간단한 사례로 구성했다. 주의를 분산시키지 않고 리팩터링의 기본에 집중하여 설명하기 위해서다. 그러니 너무 단순하더라도 이해해주기 바란다. (당연히 실제 업무에 적용하기에도 바람직한 코드는 아니다.) 하지만 여러분 앞에 놓인 더 복잡한 상황에 응용하는 데는 부족하지 않을 것이다. 너무 간단한 리팩터링은 예시를 생략했다. 예시를 보여준다고 해서 나아질 게 없다고 판단했기 때문이다.

예시는 어디까지나 해당 절에서 소개하는 리팩터링 기법 하나만 보여주기 위한 것이다. 그래서 수정을 마친 코드에는 다른 문제가 얼마든지 남아 있을 수 있다(그리고 이를 해결하려면 다른 리팩터링을 적용해야 한다). 간혹 실무에서 하나의 패턴처럼 연달아 적용되는 리팩터링들이 있는데, 이런 경우에는 연달아 적용했다. 그 외 대부분의 경우는 한 가지 리팩터링만 적용한 상태로 뒀다. 리팩터링 카탈로그의 주 용도는 어디까지나 레퍼런스이기 때문에 각각의 리팩터링을 최대한 독립적으로 구성하기 위해서다.

코드에서 변경된 부분을 구분하기 어려울 때는 다른 글꼴로 강조했다. 그렇다고 변경된 코드 전부를 강조하지는 않았다. 과유불급! 너무 과하면 오히려 역효과가 날 수 있기 때문이다.

- [4.7 끝나지 않은 여정(Much More Than this)](https://github.com/wonder13662/refactoring-v2/blob/writing/chapter04/4-7.md)
- [5.2 리팩터링 기법 선정 기준(The Choice of Refactorings)](https://github.com/wonder13662/refactoring-v2/blob/writing/chapter05/5-2.md)
