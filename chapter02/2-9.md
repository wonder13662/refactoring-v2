# 2.9 리팩터링의 유래
'리팩터링'이란 용어의 유래는 찾을 수 없었다. 실력 있는 프로그래머는 항상 자신의 코드를 정리하는 데 어느 정도의 시간을 할애해왔다. 복잡하고 지저분한 코드보다는 깔끔한 코드가 수정하기 쉽고, 처음부터 깔끔하게 작성하는 경우는 거의 없다는 것을 경험을 통해서 알기 때문이다.

리팩터링은 여기서 한 발 더 나아간다. 나는 리팩터링은 소프트웨어 개발 프로세스 전반의 핵심 요소라고 주장한다. 리팩터링이 중요함을 깨달은 선구자들인 워드 커닝햄과 켄트 벡은 1980년대부터 스몰토크를 활용해 개발해왔다. 스몰토크는 기능이 풍부한 소프트웨어를 빠르게 작성할 수 있는 굉장히 역동적인 환경인데, 당시 개발 환경 중에서 리팩터링을 활용해보기에 특히 좋았다. 스몰토크는 컴파일-링크-실행 주기가 상당히 짧아서 마지막으로 컴파일한 시점을 안다면 수정 작업을 빠르게 진행할 수 있었다. 게다가 객체 지향 언어이기 때문에 인터페이스만 잘 정의해두면 내부 수정이 외부에 미치는 영향을 최소로 줄일 수 있었다. 워드와 켄트는 이런 환경에 특화된 소프트웨어 개발 방법을 고민했고, 그 결과로 XP가 탄생한 것이다. 워드와 켄트는 생산성을 높이는 데 리팩터링의 역할이 크다는 사실을 깨닫고, 그 후로 리팩터링을 실전 프로젝트에 활용하면서 개선해나갔다.

두 사람의 아이디어가 스몰토크 커뮤니티에 큰 반향을 일으키면서 리팩터링이란 개념이 스몰토크 개발 문화에 중요한 요소로 자리 잡았다. 당시 스몰토크 커뮤니티를 주도하던 인물 중에 UIUC 대학교 교수인 랄프 존슨(Ralph Johnson)이 있었다. "디자인 패턴" 책의 공저자들을 일컫는 '4인의 갱(GoF - Gang of Four)'에 속한 인물로도 유명하다. 랄프의 최대 관심사 중 하나는 소프트웨어 프레임워크를 개발하는 것이었고, 그 일환으로 효율적이고 유연한 프레임워크를 개발하는데 리팩터링이 어떻게 기여하는지를 연구했다.

랄프의 박사 과정 학생인 빌 옵다이크(Bill Opdyke)는 특히 프레임워크에 관심이 많았다. 그는 리팩터링의 잠재 가치를 간파하고 스몰토크를 넘어 다른 언어들에도 적용할 수 있으리라 생각했다. 그는 전화 교환기를 개발한 적이 있었는데, 시간이 지날수록 코드가 점점 복잡해져서 수정하기 어려워진다는 것을 체험했다. 빌은 박사 연구 주제로 리팩터링을 개발 도구에서 지원하는 방안을 파고들었고, 그 중에서도 C++ 프레임워크 개발에 유용한 리팩터링에 관심이 많았다. 그래서 여기에 필요한 의미 보존(semantic-preserving) 리팩터링 기법들을 연구한 결과, 리팩터링 후에도 의미가 보존되는지를 검증하는 방법과 이를 도구로 구현하는 방법을 발표했다. [빌의 박사 학위 논문](http://www.laputan.org/pub/papers/opdyke-thesis.pdf)은 리팩터링에 대한 최초의 연구 업적이다.

1992년 OOPSLA 컨퍼런스에서 빌을 처음 만났을 때가 떠오른다. 그 때 카페에 함께 앉아 그의 연구 주제에 대한 설명을 들으며 '흥미롭지만 그다지 중요한 주제는 아닌 것 같다'고 생각했는데, 완전 잘못 생각했다.

존 브랜트(John Brant)와 돈 로버츠(Don Roberts)는 빌이 제기한 리팩터링 도구 아이디어를 훨씬 발전시켜서 스몰토크 환경을 위한 최초의 리팩터링 도구인 "리팩터링 브라우저(Refactoring Browser)"를 개발했다.

당시의 나를 돌이켜보면, 항상 깔끔한 코드를 추구하긴 했지만 그렇게까지 중요하게 여기지는 않았다. 그러다가 켄트와 함께 프로젝트를 진행하면서 그가 리팩터링하는 모습을 지켜볼 수 있었고, 그래서 리팩터링할 때와 안 할 때의 생산성과 품질의 차이를 확실히 경험할 수 있었다. 이 경험을 통해 리팩터링이 정말 중요한 기법임을 깨닫게 됐다. 하지만 아쉽게도 당시에는 실무 프로그래머가 읽을 만한 책이 하나도 없었고, 앞에서 언급한 리팩터링 전문가 중에서 그런 책을 쓰겠다는 사람도 없었다. 그래서 내가 그들의 도움을 받아서 이 책의 초판을 쓰게 된 것이다.

다행히 리팩터링이란 개념을 업계에서 잘 받아들였다. 이 책도 꽤 팔렸고 거의 모든 프로그래머가 리팩터링이란 용어를 쓰게 되었다. 도구도 다양하게 나왔는데 특히 자바에 특화된 것이 많았다. 하지만 이처럼 대중화되면서 코드를 재구성하는 모든 작업을 가리키는 느슨한 의미로 사용하는 사람이 많아졌다. 어쨌든 리팩터링은 주류 개발 기법으로 자리 잡았다.

- [2.8 리팩터링과 성능](https://github.com/wonder13662/refactoring-v2/blob/writing/chapter02/2-8.md)
- [2.10 리팩터링 자동화](https://github.com/wonder13662/refactoring-v2/blob/writing/chapter02/2-10.md)