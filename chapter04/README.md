## Chapter 04 테스트 구축하기

### 4.3 첫 번째 테스트
> 실패해야 할 상황에서는 반드시 실패하게 만들자

> 자주 테스트하라. 작성 중인 코드는 최소한 몇 분 간격으로 테스트하고, 적어도 하루에 한 번은 전체 테스트를 돌려보자

### 4.4 테스트 추가하기
- 테스트는 위험요인을 중심으로 작성해야 한다!(적은 수의 테스트로 큰 효과를 얻어야 한다)
> 완벽하게 만드느라 테스트를 수행하지 못하느니, 불완전한 테스트라도 작성해 실행하는 게 낫다

### 4.4 테스트 추가하기
- Producer의 production() 세터는 좀 복잡한 동작을 수행하기 때문에 테스트해볼 필요가 있다
- 일반적으로 it 구문 하나당 검증도 하나씩만 하는 게 좋다. 앞쪽 검증을 통과하지 못하면 나머지 검증은 실행해보지 못하고 테스트가 실패하게 되는데, 그러면 실패 원인을 파악하는 데 유용한 정보를 놓치기 쉽기 때문이다.

### 4.6 경계 조건 검사하기
- 범위를 벗어나는 경계 지점에서 문제가 생기면 어떤 일이 벌어지는지 확인하는 테스트도 함께 작성하면 좋다
> 문제가 생길 가능성이 있는 경계 조건을 생각해보고 그 부분을 집중적으로 테스트하자

> 어차피 모든 버그를 잡아낼 수 없다고 생각하여 테스트를 작성하지 않는다면 대다수의 버그를 잡을 수 있는 기회를 날리는 셈이다

- 테스트를 어느 수준까지 해야 할까?
  - 위험한 부분에만 집중하는 것이 좋다. 코드에서 처리 과정이 복잡한 부분을 찾아보자. 함수에서 오류가 생길만한 부분을 찾아보자.
  - 리팩터링을 하면서 프로그램을 더욱 깊이 이해하게 되어 더 많은 버그를 찾게 된다.
  - 리팩터링을 하는 동안에도 계속해서 테스트를 추가한다.

### 4.7 끝나지 않은 여정
> 버그 리포트를 받으면 가장 먼저 그 버그를 드러내는 단위 테스트부터 작성하자.
- 테스트 커버리지 분석은 코드에서 테스트하지 않은 영역을 찾는 데만 도움을 줄 뿐, 테스트 스위트의 품질과는 크게 상관없다.
- 테스트 스위트가 충분한지를 평가하는 기준은 주관적이다. 리팩터링 후 테스트 결과가 모두 초록색인 것만 보고도 리팩터링 과정에서 생겨난 버그가 하나도 없다고 확신할 수 있다면 충분히 좋은 테스트 스위트라 할 수 있다.