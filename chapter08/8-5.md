# 8.5 인라인 코드를 함수 호출로 바꾸기(Replace Inline Code with Function Call)
```diff
-let appliesToMass = false;
-for(const s of states) {
- if (s === 'MA') appliesToMass = true;
-}
+const appliesToMass = states.includes('MA');
```
## 배경
함수는 여러 동작을 하나로 묶어준다. 그리고 함수의 이름이 코드의 동작 방식보다는 목적을 말해주기 때문에 함수를 활용하면 코드를 이해하기가 쉬워진다. 함수는 중복을 없애는 데도 효과적이다. 똑같은 코드를 반복하는 대신 함수를 호출하면 된다. 이렇게 해두면 동작을 변경할 때도, 비슷해 보이는 코드들을 일일이 찾아 수정하는 대신 함수 하나만 수정하면 된다(물론 모든 호출자가 수정된 코드를 사용하는 게 맞는지 확인해야 하지만, 이 편이 더 쉽고 일부 호출자만 다른 코드를 원하는 일은 흔치 않다).

이미 존재하는 함수와 똑같은 일을 하는 인라인 코드를 발견하면 보통은 해당 코드를 함수 호출로 대체하길 원할 것이다. 예외가 있다면, 순전히 우연히 비슷한 코드가 만들어졌을 때 뿐이다. 즉, 기존 함수의 코드를 수정하더라도 인라인 코드의 동작은 바뀌지 않아야 할 때뿐이다. 이 경우인가를 판단하는 데는 함수 이름이 힌트가 된다. 이름을 잘 지었다면 인라인 코드 대신 함수 이름을 넣어도 말이 된다. 말이 되지 않는다면 함수 이름이 적절치 않거나([6.5 함수 선언 바꾸기(Change Function Declaration)](https://github.com/wonder13662/refactoring-v2/blob/writing/chapter06/6-5.md)), 그 함수의 목적이 인라인 코드의 목적과 다르기 때문일 것이다(따라서 함수 호출로 대체하면 안된다). 

특히 라이브러리가 제공하는 함수로 대체할 수 있다면 훨씬 좋다. 함수 본문을 작성할 필요조차 없어지기 때문이다.
## 절차
### (1)
인라인 코드를 함수 호출로 대체한다.
### (2)
테스트한다.

> [6.1 함수 추출하기(Extract function)](https://github.com/wonder13662/refactoring-v2/blob/writing/chapter06/6-1.md)와 이번 리팩터링의 차이는 인라인 코드를 대체할 함수가 이미 존재하느냐의 여부다. 아직 없어서 새로 만들어야 한다면 [6.1 함수 추출하기(Extract function)](https://github.com/wonder13662/refactoring-v2/blob/writing/chapter06/6-1.md)를 적용하고, 이미 존재한다면 [8.5 인라인 코드를 함수 호출로 바꾸기(Replace Inline Code with Function Call)](https://github.com/wonder13662/refactoring-v2/blob/writing/chapter08/8-5.md)를 적용하면 된다. 사용 중인 프로그래밍 언어의 표준 라이브러리나 플랫폼(혹은 프레임워크나 안정화된 서드파티 라이브러리 등)이 제공하는 API를 잘 파악하고 있을수록 이번 리팩터링의 활용 빈도가 높아질 것이다. 보통은 직접 짠 코드보다 라이브러리가 제공하는 API가 더 효율적일 가능성이 크니, 사용 중인 언어와 플랫폼이 버전업될 때 어떤 기능이 새로 생기고 변경되는지를 평소에 잘 챙겨두면 코드를 개선하는 데 많은 도움이 된다. 물론 외부 라이브러리에 지나치게 의존하면 설계 유연성이 떨어지니 처한 상황에 맞게 신중히 판단해야 한다.

- [목차](https://github.com/wonder13662/refactoring-v2/blob/writing)
- [8 기능이동](https://github.com/wonder13662/refactoring-v2/blob/writing/chapter08)
- [8.4 문장을 호출한 곳으로 옮기기(Move Statements to Caller)](https://github.com/wonder13662/refactoring-v2/blob/writing/chapter08/8-4.md)
- [8.6 문장 슬라이드하기(Slide Statements)](https://github.com/wonder13662/refactoring-v2/blob/writing/chapter08/8-6.md)
